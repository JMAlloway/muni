<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Account - EasyRFP</title>
  <link rel="stylesheet" href="/static/css/base.css">
  <link rel="stylesheet" href="/static/css/dashboard.css">
  <link rel="stylesheet" href="/static/css/account.css">
</head>
<body>
  <div class="scroll-progress" id="scrollProgress"></div>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand">
        <svg width="36" height="36" viewBox="0 0 40 40" fill="none">
          <rect width="40" height="40" rx="12" fill="url(#grad1)"/>
          <path d="M10 20L17 27L30 13" stroke="white" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
          <defs>
            <linearGradient id="grad1" x1="0" y1="0" x2="40" y2="40">
              <stop offset="0%" stop-color="#126a45"/>
              <stop offset="100%" stop-color="#22c55e"/>
            </linearGradient>
          </defs>
        </svg>
        <span>EasyRFP</span>
      </div>

      <div class="nav-label">Main Menu</div>
      <nav class="navlinks">
        <a href="/" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          <span class="nav-text">Home</span>
        </a>
        <a href="/opportunities" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <span class="nav-text">Discover Bids</span>
        </a>
        <a href="/tracker/dashboard" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span class="nav-text">My Dashboard</span>
        </a>
        <a href="/documents" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
          <span class="nav-text">Documents</span>
        </a>
        <a href="/calendar" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span class="nav-text">Calendar</span>
        </a>
        <a href="/account" class="nav-link active">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
          <span class="nav-text">My Account</span>
        </a>
      </nav>

      <div class="nav-label" style="margin-top: 24px;">Account</div>
      <nav class="navlinks">
        <a href="/account" class="nav-link active">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
          </svg>
          <span class="nav-text">Settings</span>
        </a>
        <a href="/support" class="nav-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span class="nav-text">Support</span>
        </a>
      </nav>
    </aside>

    <div class="content">
      <div class="topbar" role="banner">
        <div class="topbar-left">
          <a class="top-pill top-home" href="/" aria-label="Home">
            <span class="top-home-icon" aria-hidden="true"></span>
            <span class="top-label">Home</span>
          </a>
          <span class="top-pill top-tier" role="status">
            <span class="top-label">Tier:</span> <strong id="topTierLabel">Free</strong>
            <a href="/billing" class="top-upgrade">Upgrade</a>
          </span>
        </div>
        <div class="topbar-right">
          <button class="icon-btn" type="button" aria-label="Notifications" id="notif-btn">
            <img src="/static/img/bell.png" alt="" class="icon-img"><span class="notif-dot" aria-hidden="true"></span>
          </button>
          <div class="top-dropdown">
            <button class="icon-btn" type="button" aria-label="Help" id="help-btn">?</button>
            <div class="top-menu" id="help-menu" role="menu">
              <a href="/privacy" role="menuitem">Privacy Policy</a>
              <a href="/terms" role="menuitem">Terms of Service</a>
            </div>
          </div>
          <div class="top-dropdown">
            <button class="avatar-button" type="button" aria-haspopup="menu" aria-expanded="false" id="avatar-btn">
              <span class="avatar-halo">
                <span class="avatar-circle" id="topAvatar">JD</span>
              </span>
              <span class="top-caret" aria-hidden="true">&gt;</span>
            </button>
            <div class="top-menu" id="avatar-menu" role="menu">
              <a href="/account" role="menuitem">My Account</a>
              <a href="/account/preferences" role="menuitem">Preferences</a>
              <a href="/billing" role="menuitem">Account Billing</a>
              <a href="/logout" role="menuitem">Logout</a>
            </div>
          </div>
        </div>
      </div>

      <main class="page account-page">

        <div class="account-header fade-in">
          <div class="account-header-left">
            <div class="large-avatar" id="avatarInitials">
              <span>JD</span>
              <button class="avatar-edit-btn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
              </button>
            </div>
            <div class="account-header-info">
              <h1 class="account-name" id="accountName">John Davidson</h1>
              <p class="account-email" id="accountEmail">john.davidson@acmecontractors.com</p>
              <div class="account-badges">
                <span class="badge badge-pro" id="planBadge">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                  <span id="planBadgeLabel">Professional</span>
                </span>
                <span class="badge badge-verified">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                  </svg>
                  Verified
                </span>
                <span class="badge badge-member">Member since Oct 2023</span>
              </div>
            </div>
          </div>
          <div class="account-header-actions">
            <button class="btn-secondary" id="settingsBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
              </svg>
              Settings
            </button>
            <button class="btn-danger-outline" id="signOutBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Sign Out
            </button>
          </div>
        </div>

        <div class="account-tabs fade-in stagger-1">
          <button class="account-tab active" data-tab="overview">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            Overview
          </button>
          <button class="account-tab" data-tab="profile">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Profile
          </button>
          <button class="account-tab" data-tab="billing">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
            Billing
          </button>
          <button class="account-tab" data-tab="team">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            Team
          </button>
          <button class="account-tab" data-tab="notifications">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            Notifications
          </button>
          <button class="account-tab" data-tab="security">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Security
          </button>
        </div>

        <div class="account-content">
          <div class="tab-content active" id="tab-overview">
            <div class="account-grid">
              <div class="account-card plan-card fade-in stagger-2">
              <div class="plan-header">
                <div class="plan-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                </div>
                <div class="plan-info">
                  <span class="plan-label">Current Plan</span>
                  <h3 class="plan-name" id="planName">Professional</h3>
                </div>
                <div class="plan-price">
                  <span class="price-amount" id="planPrice">$49</span>
                  <span class="price-period" id="planPeriod">/month</span>
                </div>
              </div>
                <div class="plan-features">
                  <div class="plan-feature">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Unlimited bid tracking</span>
                  </div>
                  <div class="plan-feature">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Up to 5 team members</span>
                  </div>
                  <div class="plan-feature">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Advanced analytics</span>
                  </div>
                  <div class="plan-feature">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Priority support</span>
                  </div>
                </div>
                <div class="plan-actions">
                  <button class="btn-primary">Upgrade to Enterprise</button>
                  <button class="btn-ghost">Compare Plans</button>
                </div>
                <div class="plan-renewal">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  Next billing: December 15, 2024
                </div>
              </div>

              <div class="account-card usage-card fade-in stagger-3">
                <div class="card-header">
                  <h3 class="card-title">Usage This Month</h3>
                  <span class="card-period">Nov 1 - Nov 30</span>
                </div>
                <div class="usage-stats">
                <div class="usage-item">
                  <div class="usage-info">
                    <span class="usage-label">Active Bids</span>
                    <span class="usage-value" id="usageBids">12 / Unlimited</span>
                  </div>
                  <div class="usage-bar">
                    <div class="usage-fill" id="usageBidsFill" style="width: 100%; background: var(--primary-gradient);"></div>
                  </div>
                </div>
                <div class="usage-item">
                  <div class="usage-info">
                    <span class="usage-label">Team Members</span>
                    <span class="usage-value" id="usageTeam">3 / 5</span>
                  </div>
                  <div class="usage-bar">
                    <div class="usage-fill" id="usageTeamFill" style="width: 60%;"></div>
                  </div>
                </div>
                <div class="usage-item">
                  <div class="usage-info">
                    <span class="usage-label">Documents Stored</span>
                    <span class="usage-value" id="usageDocs">847 MB / 5 GB</span>
                  </div>
                  <div class="usage-bar">
                    <div class="usage-fill" id="usageDocsFill" style="width: 17%;"></div>
                  </div>
                </div>
                <div class="usage-item">
                  <div class="usage-info">
                    <span class="usage-label">API Calls</span>
                    <span class="usage-value" id="usageTokens">0 / 10,000</span>
                  </div>
                  <div class="usage-bar">
                    <div class="usage-fill" id="usageTokensFill" style="width: 12%;"></div>
                  </div>
                </div>
              </div>
            </div>

              <div class="account-card quick-actions-card fade-in stagger-2">
                <div class="card-header">
                  <h3 class="card-title">Quick Actions</h3>
                </div>
                <div class="quick-actions-grid">
                  <button class="quick-action" id="qaEditProfile">
                    <div class="quick-action-icon">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                      </svg>
                    </div>
                    <span>Edit Profile</span>
                  </button>
                  <button class="quick-action" id="qaInviteMember">
                    <div class="quick-action-icon blue">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                      </svg>
                    </div>
                    <span>Invite Member</span>
                  </button>
                  <button class="quick-action" id="qaUpdatePayment">
                    <div class="quick-action-icon purple">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                      </svg>
                    </div>
                    <span>Update Payment</span>
                  </button>
                  <button class="quick-action" id="qaExportData">
                    <div class="quick-action-icon orange">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                    </div>
                    <span>Export Data</span>
                  </button>
                </div>
              </div>

              <div class="account-card activity-card fade-in stagger-3">
                <div class="card-header">
                  <h3 class="card-title">Recent Activity</h3>
                  <a href="#" class="card-link">View All</a>
                </div>
                <div class="activity-list">
                  <div class="activity-item">
                    <div class="activity-icon green">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                      </svg>
                    </div>
                    <div class="activity-content">
                      <span class="activity-text">Submitted bid for <strong>HVAC Services Contract</strong></span>
                      <span class="activity-time">2 hours ago</span>
                    </div>
                  </div>
                  <div class="activity-item">
                    <div class="activity-icon blue">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                      </svg>
                    </div>
                    <div class="activity-content">
                      <span class="activity-text">Uploaded 3 documents to <strong>Yard Waste RFP</strong></span>
                      <span class="activity-time">5 hours ago</span>
                    </div>
                  </div>
                  <div class="activity-item">
                    <div class="activity-icon purple">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                      </svg>
                    </div>
                    <div class="activity-content">
                      <span class="activity-text">Invited <strong>Sarah Kim</strong> to join the team</span>
                      <span class="activity-time">Yesterday</span>
                    </div>
                  </div>
                  <div class="activity-item">
                    <div class="activity-icon orange">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                      </svg>
                    </div>
                    <div class="activity-content">
                      <span class="activity-text">Set reminder for <strong>Safety Boots deadline</strong></span>
                      <span class="activity-time">2 days ago</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="account-card team-preview-card fade-in stagger-4">
                <div class="card-header">
                  <h3 class="card-title">Your Team</h3>
                  <a href="/account/team" class="card-link">Manage</a>
                </div>
                <div class="team-list" id="teamListCard">
                  <div class="muted">Loading team...</div>
                </div>
                <button class="btn-secondary full-width" id="teamInviteCardBtn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                  Invite New Member
                </button>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab-profile">
            <div class="settings-section fade-in">
              <div class="settings-header">
                <h3>Personal Information</h3>
                <p>Update your personal details and contact information.</p>
              </div>
              <div class="settings-form">
                <div class="form-row">
                  <div class="form-group">
                    <label>First Name</label>
                    <input type="text" value="John" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" value="Davidson" class="form-input">
                  </div>
                </div>
                <div class="form-group">
                  <label>Email Address</label>
                  <input type="email" value="john.davidson@acmecontractors.com" class="form-input">
                  <span class="form-hint">This is your primary login email</span>
                </div>
                <div class="form-group">
                  <label>Phone Number</label>
                  <input type="tel" value="(614) 555-0123" class="form-input">
                </div>
                <div class="form-group">
                  <label>Job Title</label>
                  <input type="text" value="Business Development Manager" class="form-input">
                </div>
                <div class="form-actions">
                  <button class="btn-primary">Save Changes</button>
                  <button class="btn-ghost">Cancel</button>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-1">
              <div class="settings-header">
                <h3>Organization Details</h3>
                <p>Information about your company for bid submissions.</p>
              </div>
              <div class="settings-form">
                <div class="form-group">
                  <label>Company Name</label>
                  <input type="text" value="Acme Contractors LLC" class="form-input">
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Industry</label>
                    <select class="form-select">
                      <option>Construction</option>
                      <option selected>General Contracting</option>
                      <option>HVAC Services</option>
                      <option>Electrical</option>
                      <option>Plumbing</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Company Size</label>
                    <select class="form-select">
                      <option>1-10 employees</option>
                      <option selected>11-50 employees</option>
                      <option>51-200 employees</option>
                      <option>200+ employees</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label>Address</label>
                  <input type="text" value="1234 Construction Ave, Columbus, OH 43215" class="form-input">
                </div>
                <div class="form-actions">
                  <button class="btn-primary">Save Changes</button>
                  <button class="btn-ghost">Cancel</button>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-2" id="companyProfileCard">
              <div class="settings-header">
                <h3>Company Profile (AI Auto-Fill)</h3>
                <p>Store the info we need to auto-fill government bid forms.</p>
              </div>
              <div class="settings-form" id="companyProfileForm">
                <div class="form-group">
                  <label>Legal Business Name</label>
                  <input type="text" name="legal_name" class="form-input">
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>DBA (optional)</label>
                    <input type="text" name="dba" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>FEIN / EIN</label>
                    <input type="text" name="ein" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>SAM UEI</label>
                    <input type="text" name="uei" class="form-input">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>DUNS (optional)</label>
                    <input type="text" name="duns" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Business Type</label>
                    <select name="business_type" class="form-select">
                      <option value="">Select</option>
                      <option>LLC</option>
                      <option>Corporation</option>
                      <option>Sole Proprietor</option>
                      <option>Partnership</option>
                      <option>Non-Profit</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>State of Incorporation</label>
                    <input type="text" name="state_incorp" class="form-input" placeholder="OH">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Ohio Registration Number</label>
                    <input type="text" name="ohio_reg" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>NAICS Codes (comma separated)</label>
                    <input type="text" name="naics" class="form-input" placeholder="236220, 238220">
                  </div>
                  <div class="form-group">
                    <label>UNSPSC Codes (comma separated)</label>
                    <input type="text" name="unspsc" class="form-input">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>MBE/WBE/DBE Certification</label>
                    <select name="cert_status" class="form-select">
                      <option value="">Select</option>
                      <option value="yes">Yes</option>
                      <option value="no">No</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Certification Types</label>
                    <input type="text" name="cert_types" class="form-input" placeholder="MBE, WBE, DBE">
                  </div>
                  <div class="form-group">
                    <label>Certification Number</label>
                    <input type="text" name="cert_number" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Certification Expiration</label>
                    <input type="date" name="cert_expiry" class="form-input">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Primary Contact</label>
                    <input type="text" name="primary_contact" class="form-input" placeholder="Name, Title, Email, Phone">
                  </div>
                  <div class="form-group">
                    <label>Secondary Contact</label>
                    <input type="text" name="secondary_contact" class="form-input" placeholder="Name, Title, Email, Phone">
                  </div>
                  <div class="form-group">
                    <label>Bid Submission Contact</label>
                    <input type="text" name="bid_contact" class="form-input" placeholder="Name, Title, Email, Phone">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Headquarters Address</label>
                    <input type="text" name="hq_address" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Mailing Address</label>
                    <input type="text" name="mailing_address" class="form-input">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Website</label>
                    <input type="text" name="website" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Business Email</label>
                    <input type="email" name="business_email" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Billing Email</label>
                    <input type="email" name="billing_email" class="form-input">
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Years in Business</label>
                    <input type="number" name="years_business" class="form-input" min="0">
                  </div>
                  <div class="form-group">
                    <label>Bonding Capacity</label>
                    <input type="text" name="bonding" class="form-input">
                  </div>
                  <div class="form-group">
                    <label>Insurance Coverage</label>
                    <input type="text" name="insurance" class="form-input" placeholder="GL / WC / Auto">
                  </div>
                </div>
                <div class="form-group">
                  <label>Experience & Capabilities</label>
                  <textarea name="experience" class="form-input" rows="3" placeholder="Describe services, warranty support, manufacturer relationships"></textarea>
                </div>
                <div class="form-group">
                  <label>References (comma or line separated)</label>
                  <textarea name="references" class="form-input" rows="3" placeholder="Business, Contact, Email, Phone, Contract value, Dates"></textarea>
                </div>
                <div class="form-group">
                  <label>Subcontractors (comma or line separated)</label>
                  <textarea name="subcontractors" class="form-input" rows="3" placeholder="Name, Work, Contact, Certification #"></textarea>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Payment Terms</label>
                    <input type="text" name="payment_terms" class="form-input" placeholder="Net 30">
                  </div>
                  <div class="form-group">
                    <label>Delivery Lead Time</label>
                    <input type="text" name="delivery_time" class="form-input" placeholder="e.g., 10 business days">
                  </div>
                  <div class="form-group">
                    <label>Minimum Order</label>
                    <input type="text" name="min_order" class="form-input">
                  </div>
                </div>
                <div class="form-group">
                  <label>Pricing / Discounts / Catalog Link</label>
                  <textarea name="pricing" class="form-input" rows="2" placeholder="Discount structure, markup, link to catalog"></textarea>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label>Authorized Signer</label>
                    <input type="text" name="signer" class="form-input" placeholder="Name, Title">
                  </div>
                  <div class="form-group">
                    <label>Compliance Attestations</label>
                    <input type="text" name="attestations" class="form-input" placeholder="Wage theft, income tax, ORC 3517.13, public records">
                  </div>
                </div>
                <div class="form-actions">
                  <button class="btn-primary" type="button" id="saveCompanyProfile">Save Profile</button>
                  <button class="btn-ghost" type="button" id="resetCompanyProfile">Reset</button>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab-billing">
            <div class="billing-overview fade-in">
              <div class="billing-plan-card">
                <div class="billing-plan-header">
                  <div class="billing-plan-badge">Current Plan</div>
                  <div class="billing-plan-info">
                    <h2>Professional</h2>
                    <p>Perfect for growing teams</p>
                  </div>
                  <div class="billing-plan-price">
                    <span class="price-big">$49</span>
                    <span class="price-period">/month</span>
                  </div>
                </div>
                <div class="billing-plan-body">
                  <div class="billing-stat">
                    <span class="billing-stat-value">$588</span>
                    <span class="billing-stat-label">Annual cost</span>
                  </div>
                  <div class="billing-stat">
                    <span class="billing-stat-value">Dec 15</span>
                    <span class="billing-stat-label">Next billing</span>
                  </div>
                  <div class="billing-stat">
                    <span class="billing-stat-value">Monthly</span>
                    <span class="billing-stat-label">Billing cycle</span>
                  </div>
                </div>
                <div class="billing-plan-actions">
                  <button class="btn-primary">Upgrade Plan</button>
                  <button class="btn-secondary">Switch to Annual (Save 20%)</button>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-1">
              <div class="settings-header">
                <h3>Payment Method</h3>
                <p>Manage your payment information.</p>
              </div>
              <div class="payment-methods">
                <div class="payment-card active">
                  <div class="payment-card-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                      <rect x="1" y="4" width="22" height="16" rx="3" fill="#1A1F71"/>
                      <text x="12" y="14" text-anchor="middle" fill="white" font-size="6" font-weight="bold">VISA</text>
                    </svg>
                  </div>
                  <div class="payment-card-info">
                    <span class="payment-card-number">•••• •••• •••• 4242</span>
                    <span class="payment-card-expiry">Expires 08/26</span>
                  </div>
                  <span class="payment-card-default">Default</span>
                  <button class="payment-card-edit">Edit</button>
                </div>
                <button class="add-payment-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                  Add Payment Method
                </button>
              </div>
            </div>

            <div class="settings-section fade-in stagger-2">
              <div class="settings-header">
                <h3>Billing History</h3>
                <p>Download invoices and view past payments.</p>
              </div>
              <div class="billing-table">
                <div class="billing-row header">
                  <span>Date</span>
                  <span>Description</span>
                  <span>Amount</span>
                  <span>Status</span>
                  <span></span>
                </div>
                <div class="billing-row">
                  <span>Nov 15, 2024</span>
                  <span>Professional Plan - Monthly</span>
                  <span>$49.00</span>
                  <span class="status-badge paid">Paid</span>
                  <button class="download-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7 10 12 15 17 10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                  </button>
                </div>
                <div class="billing-row">
                  <span>Oct 15, 2024</span>
                  <span>Professional Plan - Monthly</span>
                  <span>$49.00</span>
                  <span class="status-badge paid">Paid</span>
                  <button class="download-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7 10 12 15 17 10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                  </button>
                </div>
                <div class="billing-row">
                  <span>Sep 15, 2024</span>
                  <span>Professional Plan - Monthly</span>
                  <span>$49.00</span>
                  <span class="status-badge paid">Paid</span>
                  <button class="download-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                      <polyline points="7 10 12 15 17 10"></polyline>
                      <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab-team">
            <div class="team-header fade-in">
              <div class="team-header-info">
                <h2>Team Members</h2>
                <p>Manage your team and their permissions.</p>
              </div>
              <div class="team-header-stats">
                <div class="team-stat">
                  <span class="team-stat-value" id="teamCount">3</span>
                  <span class="team-stat-label">Members</span>
                </div>
                <div class="team-stat">
                  <span class="team-stat-value" id="teamAvailable">2</span>
                  <span class="team-stat-label">Available</span>
                </div>
              </div>
              <button class="btn-primary" id="teamInviteBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Invite Member
              </button>
            </div>

            <div class="team-grid fade-in stagger-1" id="teamGrid">
              <div class="team-card owner-card">
                <div class="team-card-header">
                  <div class="team-card-avatar">JD</div>
                  <div class="team-card-badge owner">Owner</div>
                </div>
                <div class="team-card-body">
                  <h4>John Davidson</h4>
                  <p>john.davidson@acmecontractors.com</p>
                  <span class="team-card-status online">
                    <span class="status-dot"></span>
                    Online now
                  </span>
                </div>
                <div class="team-card-footer">
                  <span class="team-card-joined">Joined Oct 2023</span>
                </div>
              </div>

              <div class="team-card">
                <div class="team-card-header">
                  <div class="team-card-avatar" style="background: linear-gradient(135deg, #3b82f6, #60a5fa);">SK</div>
                  <div class="team-card-badge admin">Admin</div>
                </div>
                <div class="team-card-body">
                  <h4>Sarah Kim</h4>
                  <p>sarah.kim@acmecontractors.com</p>
                  <span class="team-card-status online">
                    <span class="status-dot"></span>
                    Online now
                  </span>
                </div>
                <div class="team-card-footer">
                  <span class="team-card-joined">Joined Nov 2023</span>
                  <button class="team-card-menu">•••</button>
                </div>
              </div>

              <div class="team-card">
                <div class="team-card-header">
                  <div class="team-card-avatar" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa);">MR</div>
                  <div class="team-card-badge member">Member</div>
                </div>
                <div class="team-card-body">
                  <h4>Mike Rodriguez</h4>
                  <p>mike.rodriguez@acmecontractors.com</p>
                  <span class="team-card-status offline">
                    <span class="status-dot"></span>
                    Offline
                  </span>
                </div>
                <div class="team-card-footer">
                  <span class="team-card-joined">Joined Jan 2024</span>
                  <button class="team-card-menu">•••</button>
                </div>
              </div>

              <div class="team-card add-card">
                <div class="add-card-content">
                  <div class="add-card-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="12" y1="5" x2="12" y2="19"></line>
                      <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                  </div>
                  <h4>Add Team Member</h4>
                  <p>2 seats remaining</p>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-2">
              <div class="settings-header">
                <h3>Pending Invitations</h3>
              </div>
              <div class="pending-invites" id="pendingInvites">
                <div class="muted">No pending invites.</div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab-notifications">
            <div class="settings-section fade-in">
              <div class="settings-header">
                <h3>Email Notifications</h3>
                <p>Choose what updates you want to receive via email.</p>
              </div>
              <div class="notification-list">
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Bid Deadline Reminders</h4>
                    <p>Get notified 24 hours and 1 hour before deadlines</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>New Opportunities</h4>
                    <p>Daily digest of new bids matching your preferences</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Team Activity</h4>
                    <p>Updates when team members make changes to bids</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Weekly Summary</h4>
                    <p>Weekly report of your bid activity and wins</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Product Updates</h4>
                    <p>New features and improvements to EasyRFP</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-1">
              <div class="settings-header">
                <h3>Push Notifications</h3>
                <p>Real-time alerts in your browser.</p>
              </div>
              <div class="notification-list">
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Urgent Deadlines</h4>
                    <p>Immediate alerts for bids due within 2 hours</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Team Messages</h4>
                    <p>Notifications for new messages and mentions</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="notification-item">
                  <div class="notification-info">
                    <h4>Document Updates</h4>
                    <p>Alerts when documents are uploaded or modified</p>
                  </div>
                  <label class="toggle">
                    <input type="checkbox">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="tab-content" id="tab-security">
            <div class="settings-section fade-in">
              <div class="settings-header">
                <h3>Password</h3>
                <p>Update your password to keep your account secure.</p>
              </div>
              <div class="settings-form">
                <div class="form-group">
                  <label>Current Password</label>
                  <div class="password-input-wrapper">
                    <input type="password" placeholder="Enter current password" class="form-input">
                    <button class="password-toggle" type="button">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="form-group">
                  <label>New Password</label>
                  <div class="password-input-wrapper">
                    <input type="password" placeholder="Enter new password" class="form-input">
                    <button class="password-toggle" type="button">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                  </div>
                  <div class="password-strength">
                    <div class="strength-bar">
                      <div class="strength-fill" style="width: 0%;"></div>
                    </div>
                    <span class="strength-label">Enter a password</span>
                  </div>
                </div>
                <div class="form-group">
                  <label>Confirm New Password</label>
                  <input type="password" placeholder="Confirm new password" class="form-input">
                </div>
                <div class="form-actions">
                  <button class="btn-primary">Update Password</button>
                </div>
              </div>
            </div>

            <div class="settings-section fade-in stagger-1">
              <div class="settings-header">
                <h3>Two-Factor Authentication</h3>
                <p>Add an extra layer of security to your account.</p>
              </div>
              <div class="two-factor-card">
                <div class="two-factor-icon">
                  <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </div>
                <div class="two-factor-info">
                  <h4>Two-Factor Authentication is OFF</h4>
                  <p>Protect your account with an additional security layer using your phone.</p>
                </div>
                <button class="btn-primary">Enable 2FA</button>
              </div>
            </div>

            <div class="settings-section fade-in stagger-2">
              <div class="settings-header">
                <h3>Active Sessions</h3>
                <p>Manage devices where you're currently logged in.</p>
              </div>
              <div class="sessions-list">
                <div class="session-item current">
                  <div class="session-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                      <line x1="8" y1="21" x2="16" y2="21"></line>
                      <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                  </div>
                  <div class="session-info">
                    <span class="session-device">MacBook Pro - Chrome</span>
                    <span class="session-location">Columbus, OH • Current session</span>
                  </div>
                  <span class="session-current-badge">This device</span>
                </div>
                <div class="session-item">
                  <div class="session-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                      <line x1="12" y1="18" x2="12.01" y2="18"></line>
                    </svg>
                  </div>
                  <div class="session-info">
                    <span class="session-device">iPhone 14 - Safari</span>
                    <span class="session-location">Columbus, OH • Last active 2 hours ago</span>
                  </div>
                  <button class="btn-danger-ghost">Revoke</button>
                </div>
              </div>
              <button class="btn-danger-outline full-width">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                  <polyline points="16 17 21 12 16 7"></polyline>
                  <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Sign Out All Other Sessions
              </button>
            </div>

            <div class="settings-section danger-zone fade-in stagger-3">
              <div class="settings-header">
                <h3>Danger Zone</h3>
                <p>Irreversible and destructive actions.</p>
              </div>
              <div class="danger-actions">
                <div class="danger-action">
                  <div class="danger-info">
                    <h4>Export Your Data</h4>
                    <p>Download a copy of all your data including bids, documents, and settings.</p>
                  </div>
                  <button class="btn-secondary">Export Data</button>
                </div>
                <div class="danger-action">
                  <div class="danger-info">
                    <h4>Delete Account</h4>
                    <p>Permanently delete your account and all associated data. This cannot be undone.</p>
                  </div>
                  <button class="btn-danger">Delete Account</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const scrollProgress = document.getElementById('scrollProgress');
      const content = document.querySelector('.content');
      
      content.addEventListener('scroll', () => {
        const scrollTop = content.scrollTop;
        const scrollHeight = content.scrollHeight - content.clientHeight;
        const progress = (scrollTop / scrollHeight) * 100;
        scrollProgress.style.width = progress + '%';
      });

      const tabs = document.querySelectorAll('.account-tab');
      const tabContents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.dataset.tab;
          
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          tabContents.forEach(content => {
            content.classList.remove('active');
            if (content.id === `tab-${tabId}`) {
              content.classList.add('active');
              content.querySelectorAll('.fade-in').forEach((el, i) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(16px)';
                setTimeout(() => {
                  el.style.opacity = '1';
                  el.style.transform = 'translateY(0)';
                }, 50 * i);
              });
            }
          });
        });
      });

      setTimeout(() => {
        document.querySelectorAll('.fade-in').forEach((el, i) => {
          setTimeout(() => {
            el.style.opacity = '1';
            el.style.transform = 'translateY(0)';
          }, 50 * i);
        });
      }, 100);

      document.querySelectorAll('.toggle input').forEach(toggle => {
        toggle.addEventListener('change', function() {
          const label = this.closest('.notification-item').querySelector('h4').textContent;
          console.log(`${label}: ${this.checked ? 'enabled' : 'disabled'}`);
        });
      });

      document.querySelectorAll('.password-toggle').forEach(btn => {
        btn.addEventListener('click', function() {
          const input = this.previousElementSibling;
          const type = input.type === 'password' ? 'text' : 'password';
          input.type = type;
          this.classList.toggle('active');
        });
      });

      const newPasswordInput = document.querySelector('input[placeholder="Enter new password"]');
      if (newPasswordInput) {
        newPasswordInput.addEventListener('input', function() {
          const password = this.value;
          const strengthFill = document.querySelector('.strength-fill');
          const strengthLabel = document.querySelector('.strength-label');
          
          let strength = 0;
          if (password.length >= 8) strength += 25;
          if (/[A-Z]/.test(password)) strength += 25;
          if (/[0-9]/.test(password)) strength += 25;
          if (/[^A-Za-z0-9]/.test(password)) strength += 25;
          
          strengthFill.style.width = strength + '%';
          
          if (strength === 0) {
            strengthLabel.textContent = 'Enter a password';
            strengthFill.style.background = '#94a3b8';
          } else if (strength <= 25) {
            strengthLabel.textContent = 'Weak';
            strengthFill.style.background = '#ef4444';
          } else if (strength <= 50) {
            strengthLabel.textContent = 'Fair';
            strengthFill.style.background = '#f59e0b';
          } else if (strength <= 75) {
            strengthLabel.textContent = 'Good';
            strengthFill.style.background = '#22c55e';
          } else {
            strengthLabel.textContent = 'Strong';
            strengthFill.style.background = 'var(--primary-gradient)';
          }
        });
      }

      document.getElementById('signOutBtn')?.addEventListener('click', function() {
        if (confirm('Are you sure you want to sign out?')) {
          window.location.href = '/logout';
        }
      });

      // Dynamic wiring -------------------------------------------------
      const planPricing = {
        free: { amount: '$0', period: '/month', limit: 1 },
        starter: { amount: '$29', period: '/month', limit: 3 },
        professional: { amount: '$99', period: '/month', limit: 5 },
        enterprise: { amount: '$299', period: '/month', limit: 50 },
      };

      function getCSRF() {
        try { return (document.cookie.match(/(?:^|; )csrftoken=([^;]+)/) || [])[1] || ''; } catch (_) { return ''; }
      }

      function initials(str) {
        if (!str) return '??';
        const parts = str.trim().split(/\s+/);
        if (parts.length >= 2) return (parts[0][0] + parts[1][0]).toUpperCase();
        if (str.includes('@')) return str.split('@')[0].slice(0, 2).toUpperCase();
        return str.slice(0, 2).toUpperCase();
      }

      function setUsage(textEl, fillEl, used, limit, gradient) {
        if (!textEl || !fillEl) return;
        const unlimited = !limit || limit === Infinity;
        textEl.textContent = unlimited ? `${used} / Unlimited` : `${used} / ${limit}`;
        const pct = unlimited ? 100 : Math.min(100, Math.round((used / limit) * 100));
        fillEl.style.width = `${pct}%`;
        if (gradient) fillEl.style.background = gradient;
      }

      function renderTeam(members, seatLimit) {
        const grid = document.getElementById('teamGrid');
        if (!grid) return;
        const palette = [
          'linear-gradient(135deg, #126a45, #22c55e)',
          'linear-gradient(135deg, #3b82f6, #60a5fa)',
          'linear-gradient(135deg, #8b5cf6, #a78bfa)',
          'linear-gradient(135deg, #f59e0b, #fbbf24)',
        ];
        const cards = members.map((m, idx) => {
          const role = (m.role || 'member').toLowerCase();
          const badgeClass = role === 'owner' ? 'owner' : role === 'admin' ? 'admin' : 'member';
          const bg = palette[idx % palette.length];
          const status = m.accepted ? 'online' : 'offline';
          const statusText = m.accepted ? 'Online now' : 'Pending invite';
          const joined = m.accepted_at ? `Joined ${new Date(m.accepted_at).toLocaleDateString()}` : `Invited ${new Date(m.invited_at || Date.now()).toLocaleDateString()}`;
          const removeBtn = role !== 'owner'
            ? `<button class="team-card-menu" data-remove="${m.id}" data-email="${m.email || ''}">⋯</button>`
            : '';
          return `
            <div class="team-card ${role === 'owner' ? 'owner-card' : ''}">
              <div class="team-card-header">
                <div class="team-card-avatar" style="background:${bg};">${initials(m.name || m.email)}</div>
                <div class="team-card-badge ${badgeClass}">${role.charAt(0).toUpperCase() + role.slice(1)}</div>
              </div>
              <div class="team-card-body">
                <h4>${m.name || m.email}</h4>
                <p>${m.email || ''}</p>
                <span class="team-card-status ${status}">
                  <span class="status-dot"></span>
                  ${statusText}
                </span>
              </div>
              <div class="team-card-footer">
                <span class="team-card-joined">${joined}</span>
                ${removeBtn}
              </div>
            </div>
          `;
        });
        const remaining = Math.max(0, (seatLimit || members.length) - members.length);
        cards.push(`
          <div class="team-card add-card" id="teamAddCard">
            <div class="add-card-content">
              <div class="add-card-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
              </div>
              <h4>Add Team Member</h4>
              <p>${remaining} seats remaining</p>
            </div>
          </div>
        `);
        grid.innerHTML = cards.join('');
      }

      function renderTeamPreview(members){
        const wrap = document.getElementById('teamListCard');
        if (!wrap) return;
        if (!members || !members.length) {
          wrap.innerHTML = "<div class='muted'>No teammates yet.</div>";
          return;
        }
        const palette = [
          'linear-gradient(135deg, #126a45, #22c55e)',
          'linear-gradient(135deg, #3b82f6, #60a5fa)',
          'linear-gradient(135deg, #8b5cf6, #a78bfa)',
          'linear-gradient(135deg, #f59e0b, #fbbf24)',
        ];
        wrap.innerHTML = members.map((m, idx) => {
          const role = (m.role || 'member').toLowerCase();
          const bg = palette[idx % palette.length];
          return `
            <div class="team-member">
              <div class="member-avatar" style="background:${bg};">${initials(m.name || m.email)}</div>
              <div class="member-info">
                <span class="member-name">${m.name || m.email}</span>
                <span class="member-role">${role.charAt(0).toUpperCase() + role.slice(1)}</span>
              </div>
            </div>
          `;
        }).join('');
      }

      function renderPendingInvites(members) {
        const wrap = document.getElementById('pendingInvites');
        if (!wrap) return;
        const pending = (members || []).filter(m => !m.accepted);
        if (!pending.length) {
          wrap.innerHTML = "<div class='muted'>No pending invites.</div>";
          return;
        }
        wrap.innerHTML = pending
          .map((m) => {
            const sentLabel = m.invited_at
              ? `Sent ${new Date(m.invited_at).toLocaleDateString()}`
              : 'Sent';
            return `
              <div class="pending-invite" data-invite-id="${m.id}" data-email="${m.email || m.invited_email || ''}">
                <div class="pending-avatar">${initials(m.name || m.email || m.invited_email)}</div>
                <div class="pending-info">
                  <span class="pending-email">${m.email || m.invited_email || ''}</span>
                  <span class="pending-sent">${sentLabel}</span>
                </div>
                <div class="pending-actions">
                  <button class="btn-ghost" data-resend="${m.email || m.invited_email || ''}">Resend</button>
                  <button class="btn-danger-ghost" data-revoke="${m.id}">Revoke</button>
                </div>
              </div>
            `;
          })
          .join('');
      }

      function bindTeamHandlers() {
        const grid = document.getElementById('teamGrid');
        if (!grid) return;
        grid.addEventListener('click', async (e) => {
          if (e.target.closest('#teamAddCard')) {
            inviteFlow();
            return;
          }
          const removeBtn = e.target.closest('[data-remove]');
          if (removeBtn) {
            const id = removeBtn.getAttribute('data-remove');
            const email = removeBtn.getAttribute('data-email') || 'this member';
            if (!id) return;
            if (!confirm(`Remove ${email} from your team?`)) return;
            removeBtn.disabled = true;
            try {
              const res = await fetch(`/api/team/members/${id}/remove`, {
                method: 'POST',
                credentials: 'include',
                headers: { 'X-CSRF-Token': getCSRF() },
              });
              if (!res.ok) throw new Error('Failed');
              await loadAccount();
            } catch (_) {
              alert('Could not remove member (owner required).');
            } finally {
              removeBtn.disabled = false;
            }
          }
        });

        const pendingWrap = document.getElementById('pendingInvites');
        if (pendingWrap) {
          pendingWrap.addEventListener('click', async (e) => {
            const resend = e.target.closest('[data-resend]');
            if (resend) {
              const email = resend.getAttribute('data-resend');
              if (!email) return;
              resend.disabled = true;
              try {
                const res = await fetch('/api/team/invite', {
                  method: 'POST',
                  credentials: 'include',
                  headers: { 'Content-Type': 'application/json', 'X-CSRF-Token': getCSRF() },
                  body: JSON.stringify({ email }),
                });
                if (!res.ok) throw new Error('failed');
                alert('Invitation resent.');
                await loadAccount();
              } catch (_) {
                alert('Could not resend invite.');
              } finally {
                resend.disabled = false;
              }
              return;
            }
            const revoke = e.target.closest('[data-revoke]');
            if (revoke) {
              const id = revoke.getAttribute('data-revoke');
              const email = revoke.closest('.pending-invite')?.getAttribute('data-email') || 'this invite';
              if (!id) return;
              if (!confirm(`Revoke invite for ${email}?`)) return;
              revoke.disabled = true;
              try {
                const res = await fetch(`/api/team/members/${id}/remove`, {
                  method: 'POST',
                  credentials: 'include',
                  headers: { 'X-CSRF-Token': getCSRF() },
                });
                if (!res.ok) throw new Error('failed');
                await loadAccount();
              } catch (_) {
                alert('Could not revoke invite (owner required).');
              } finally {
                revoke.disabled = false;
              }
            }
          });
        }
      }

      async function inviteFlow() {
        const email = prompt('Enter teammate email to invite:');
        if (!email) return;
        try {
          const res = await fetch('/api/team/invite', {
            method: 'POST',
            credentials: 'include',
            headers: { 'Content-Type': 'application/json', 'X-CSRF-Token': getCSRF() },
            body: JSON.stringify({ email }),
          });
          if (!res.ok) throw new Error('Invite failed');
          alert('Invite sent (if seats available).');
          await loadAccount();
        } catch (err) {
          alert('Invite failed. Check your plan seats or try again.');
        }
      }

      async function loadAccount() {
        const res = await fetch('/api/account/overview', { credentials: 'include' });
        if (!res.ok) return;
        const data = await res.json();
        const user = data.user || {};
        const plan = data.plan || {};
        const usage = data.usage || {};
        const team = data.team || {};
        const name = user.name || user.email || 'My Account';
        const nameEl = document.getElementById('accountName');
        if (nameEl) nameEl.textContent = name;
        const emailEl = document.getElementById('accountEmail');
        if (emailEl) emailEl.textContent = user.email || '';
        const avatar = document.getElementById('avatarInitials');
        if (avatar && avatar.querySelector('span')) avatar.querySelector('span').textContent = initials(name);
        const topAvatar = document.getElementById('topAvatar');
        if (topAvatar) topAvatar.textContent = initials(name);
        const badge = document.getElementById('planBadge');
        const badgeLabel = document.getElementById('planBadgeLabel');
        if (badgeLabel) badgeLabel.textContent = plan.label || '';
        if (badge && !badgeLabel) badge.textContent = plan.label || '';
        const planNameEl = document.getElementById('planName');
        if (planNameEl) planNameEl.textContent = plan.label || '';
        const planPriceEl = document.getElementById('planPrice');
        if (planPriceEl) planPriceEl.textContent = plan.amount || '$0';
        const planPeriodEl = document.getElementById('planPeriod');
        if (planPeriodEl) planPeriodEl.textContent = plan.period || '/month';
        const topTierLabel = document.getElementById('topTierLabel');
        if (topTierLabel) topTierLabel.textContent = plan.label || '';
        const tierKey = (user.tier_key || '').toLowerCase();
        const seatLimit = (planPricing[tierKey] || {}).limit || usage.team || 5;
        setUsage(document.getElementById('usageBids'), document.getElementById('usageBidsFill'), usage.tracked || 0, Infinity, 'var(--primary-gradient)');
        setUsage(document.getElementById('usageTeam'), document.getElementById('usageTeamFill'), usage.team || 0, seatLimit);
        const docsMB = (usage.documents?.bytes || 0) / (1024 * 1024);
      setUsage(document.getElementById('usageDocs'), document.getElementById('usageDocsFill'), Math.round(docsMB), 5000);
      setUsage(document.getElementById('usageTokens'), document.getElementById('usageTokensFill'), usage.token_calls || 0, 10000);

        const teamMembers = team.members || [];
        const teamCountEl = document.getElementById('teamCount');
        const teamAvailEl = document.getElementById('teamAvailable');
        if (teamCountEl) teamCountEl.textContent = teamMembers.length.toString();
        if (teamAvailEl) teamAvailEl.textContent = Math.max(0, seatLimit - teamMembers.length).toString();
        renderTeam(teamMembers, seatLimit);
        renderTeamPreview(teamMembers);
        renderPendingInvites(teamMembers);
      }

      async function loadCompanyProfile() {
        try {
          const res = await fetch('/api/company-profile', { credentials: 'include' });
          if (!res.ok) return;
          const data = await res.json();
          const payload = data.data || {};
          const form = document.getElementById('companyProfileForm');
          if (!form) return;
          Array.from(form.querySelectorAll('[name]')).forEach((el) => {
            const key = el.getAttribute('name');
            if (!key) return;
            if (el.type === 'checkbox') {
              el.checked = !!payload[key];
            } else {
              el.value = payload[key] || '';
            }
          });
        } catch (_) { /* noop */ }
      }

      function collectCompanyProfile() {
        const form = document.getElementById('companyProfileForm');
        if (!form) return {};
        const data = {};
        Array.from(form.querySelectorAll('[name]')).forEach((el) => {
          const key = el.getAttribute('name');
          if (!key) return;
          if (el.type === 'checkbox') {
            data[key] = el.checked;
          } else {
            data[key] = el.value || '';
          }
        });
        return data;
      }

      async function saveCompanyProfile() {
        const btn = document.getElementById('saveCompanyProfile');
        if (btn) btn.disabled = true;
        try {
          const payload = collectCompanyProfile();
          const res = await fetch('/api/company-profile', {
            method: 'POST',
            credentials: 'include',
            headers: { 'Content-Type': 'application/json', 'X-CSRF-Token': getCSRF() },
            body: JSON.stringify(payload),
          });
          if (!res.ok) throw new Error('Save failed');
          alert('Company profile saved.');
        } catch (_) {
          alert('Could not save company profile.');
        } finally {
          if (btn) btn.disabled = false;
        }
      }

      document.getElementById('saveCompanyProfile')?.addEventListener('click', saveCompanyProfile);
      document.getElementById('resetCompanyProfile')?.addEventListener('click', loadCompanyProfile);

      // Bind actions
      document.getElementById('qaEditProfile')?.addEventListener('click', () => {
        document.querySelector('[data-tab=\"profile\"]')?.click();
      });
      document.getElementById('qaInviteMember')?.addEventListener('click', inviteFlow);
      document.getElementById('qaUpdatePayment')?.addEventListener('click', () => window.location.href = '/billing');
      document.getElementById('qaExportData')?.addEventListener('click', () => window.location.href = '/billing');
      document.getElementById('teamInviteBtn')?.addEventListener('click', inviteFlow);
      document.getElementById('teamInviteCardBtn')?.addEventListener('click', inviteFlow);

      // Help dropdown toggle (match shared layout)
      (function(){
        const btn = document.getElementById('help-btn');
        const menu = document.getElementById('help-menu');
        if (!btn || !menu) return;
        const toggle = (open) => {
          menu.style.display = open ? 'block' : 'none';
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        };
        btn.addEventListener('click', function(){
          const isOpen = menu.style.display === 'block';
          toggle(!isOpen);
        });
        document.addEventListener('click', function(e){
          if (!btn.contains(e.target) && !menu.contains(e.target)) toggle(false);
        });
      })();

      // Avatar dropdown toggle (match shared layout)
      (function(){
        const btn = document.getElementById('avatar-btn');
        const menu = document.getElementById('avatar-menu');
        if (!btn || !menu) return;
        const toggle = (open) => {
          menu.style.display = open ? 'block' : 'none';
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        };
        btn.addEventListener('click', function(){
          const isOpen = menu.style.display === 'block';
          toggle(!isOpen);
        });
        document.addEventListener('click', function(e){
          if (!btn.contains(e.target) && !menu.contains(e.target)) toggle(false);
        });
      })();

      bindTeamHandlers();
      loadAccount();
      loadCompanyProfile();
    });
  </script>
</body>
</html>
