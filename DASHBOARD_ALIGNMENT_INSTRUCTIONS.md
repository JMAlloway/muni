# Dashboard Alignment Instructions

## Summary of Differences

After comparing your live `/tracker/dashboard` with `Homepage_test/dashboard-demo.html`, I've identified the following discrepancies in the **main content area**.

---

## 1. CSS Differences

### A. Page Max Width
**Problem:** Your page is narrower than the example.

| File | Current | Example |
|------|---------|---------|
| `dashboard.css` line ~486 | `max-width: 1260px` | `max-width: 1400px` |

**Fix in** `app/web/static/css/dashboard.css`:
```css
/* Line ~486-490 - Change: */
.page {
  padding: 32px;
  max-width: 1400px;  /* Was 1260px */
  flex: 1;
}
```

---

### B. Grid-3 Layout Proportions
**Problem:** Your grid has complex proportions vs the simpler example.

| File | Current | Example |
|------|---------|---------|
| `dashboard.css` line ~1565 | `minmax(0, 2.35fr) minmax(280px, 0.85fr)` | `2fr 1fr` |

**Fix in** `app/web/static/css/dashboard.css`:
```css
/* Line ~1565-1569 - Change: */
.grid-3 {
  display: grid;
  grid-template-columns: 2fr 1fr;  /* Simpler ratio */
  gap: 24px;
}
```

---

### C. Topbar Hidden on Dashboard
**Problem:** Your dashboard hides the topbar via `.tracker-dashboard-page` rules. The example shows the topbar with breadcrumbs.

**Current code** (lines 265-271):
```css
.tracker-dashboard-page .topbar {
  display: none;
}

.tracker-dashboard-page .page {
  padding-top: 32px;
}
```

**Options:**
1. **Remove these rules** to show the topbar (matches example)
2. **Keep hidden** if you prefer no topbar on dashboard

If you want to show the topbar, **delete lines 265-271** in `dashboard.css`.

---

## 2. HTML/Template Differences

### A. Activity Feed - Icon Style
**Problem:** Your activity items use avatar circles; example uses emoji icon boxes.

**Your current code** (`tracker_dashboard.py` ~line 301-310):
```html
<div class="activity-item">
  <div class="activity-avatar" style="background:{color};">{init}</div>
  <div class="activity-content">...</div>
</div>
```

**Example code:**
```html
<div class="activity-item">
  <div class="activity-icon">ðŸ“¤</div>
  <div class="activity-content">...</div>
</div>
```

**Fix in** `app/api/tracker_dashboard.py` - Update `render_activity()` function (~line 293):

```python
def render_activity() -> str:
    # Map activity verbs to icons
    verb_icons = {
        "added to tracking": "ðŸ“‹",
        "uploaded": "ðŸ“¤",
        "completed": "âœ…",
        "awarded": "ðŸŽ‰",
        "submitted": "ðŸš€",
    }

    blocks = []
    for entry in activity_entries:
        who = entry.get("who") or ""
        name = who.split("@")[0] or "User"
        verb = entry.get("verb") or ""

        # Find matching icon or default
        icon = "ðŸ“‹"
        for key, emoji in verb_icons.items():
            if key in verb.lower():
                icon = emoji
                break

        blocks.append(
            f"""
            <div class="activity-item">
              <div class="activity-icon">{icon}</div>
              <div class="activity-content">
                <div class="activity-text"><strong>{_esc(name)}</strong> {_esc(verb)} {_esc(entry.get('obj'))}</div>
                <div class="activity-time">Just now</div>
              </div>
            </div>
            """
        )
    if not blocks:
        return '<div class="muted">No recent activity yet.</div>'
    return "\n".join(blocks)
```

---

### B. Timeline Item - Class Name
**Problem:** Your timeline uses `.timeline-sub` but CSS targets `.timeline-desc`.

**Your current** (`tracker_dashboard.py` ~line 607):
```html
<div class="timeline-sub">${it.agency} ...</div>
```

**Should be:**
```html
<div class="timeline-desc">${it.agency} ...</div>
```

**Fix in** `app/api/tracker_dashboard.py` (~line 607 in the script tag):

```javascript
// Change timeline-sub to timeline-desc
<div class="timeline-desc">${it.agency} ${it.external_id ? ' â€¢ ' + it.external_id : ''}</div>
```

---

### C. Solicitation Cards - Missing Features
**Problem:** Your dynamically generated cards lack several features from the example:

1. **Progress Ring** - Visual completion percentage
2. **Chat Drawer Button** - Team thread access
3. **Expanded Details Section** - Checklist, files, quick actions

These are generated by JavaScript in `tracker_dashboard.js`. The example has static HTML with these elements.

**Current card structure** (simplified):
```
[Status Dot] [Title/Agency] [Due Badge] [Expand Button]
```

**Example card structure:**
```
[Status Dot] [Title/Agency] [Progress Ring] [Due Badge] [Chat Button] [Expand Button]
  â””â”€ Expanded: [Checklist] [Files] [Quick Actions]
```

**To add these features**, you need to modify `app/web/static/js/tracker_dashboard.js` where cards are rendered. Look for the card rendering function and add:

```javascript
// Add progress ring before due badge
<div class="progress-ring tooltip" data-tooltip="${progress}% complete">
  <svg viewBox="0 0 44 44">
    <circle class="progress-ring-bg" cx="22" cy="22" r="18"/>
    <circle class="progress-ring-fill" cx="22" cy="22" r="18"
            stroke-dasharray="113" stroke-dashoffset="${113 - (progress * 1.13)}"/>
  </svg>
  <span class="progress-ring-text">${progress}%</span>
</div>

// Add chat button after due badge (if notes exist)
<button class="chat-drawer-btn" data-title="${title}" data-id="${opportunityId}">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
  </svg>
  <span class="chat-badge">${noteCount}</span>
</button>
```

---

## 3. Summary of Required Changes

### Quick Fixes (CSS only):

| File | Line | Change |
|------|------|--------|
| `dashboard.css` | ~486 | `max-width: 1260px` â†’ `max-width: 1400px` |
| `dashboard.css` | ~1567 | `minmax(0, 2.35fr) minmax(280px, 0.85fr)` â†’ `2fr 1fr` |

### Medium Fixes (Template):

| File | Function | Change |
|------|----------|--------|
| `tracker_dashboard.py` | `render_activity()` | Use `.activity-icon` with emoji instead of `.activity-avatar` |
| `tracker_dashboard.py` | Timeline script | Change `timeline-sub` â†’ `timeline-desc` |

### Advanced Fixes (JavaScript):

| File | Feature | Change |
|------|---------|--------|
| `tracker_dashboard.js` | Progress rings | Add circular progress indicator to cards |
| `tracker_dashboard.js` | Chat buttons | Add team thread buttons with note counts |
| `tracker_dashboard.js` | Expanded details | Add checklist, files, actions sections |

---

## 4. CSS Additions Needed

The following CSS classes are used in the example but may be missing styles:

### Progress Ring (already in your CSS - verify it works)
```css
.progress-ring {
  width: 48px;
  height: 48px;
  position: relative;
}
```

### Activity Icon (you have `.activity-avatar`, need to ensure `.activity-icon` exists)
```css
/* Verify this exists in your dashboard.css around line 1513 */
.activity-icon {
  width: 44px;
  height: 44px;
  background: var(--primary-glow);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}
```

### If `.activity-avatar` styles exist but `.activity-icon` doesn't, add this:
```css
/* Add after .activity-feed styles */
.activity-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  font-weight: 600;
  flex-shrink: 0;
}
```

---

## 5. File Locations Reference

| Purpose | File Path |
|---------|-----------|
| Dashboard CSS | `app/web/static/css/dashboard.css` |
| Dashboard Template | `app/api/tracker_dashboard.py` |
| Dashboard JS | `app/web/static/js/tracker_dashboard.js` |
| Example HTML | `Homepage_test/dashboard-demo.html` |
| Example CSS | `Homepage_test/dashboard.css` |

---

## Priority Order

1. **High Priority** - CSS fixes (2 lines, immediate visual improvement)
2. **Medium Priority** - Activity icon fix (better visual consistency)
3. **Medium Priority** - Timeline class fix (ensures proper styling)
4. **Lower Priority** - Progress rings and chat buttons (feature parity)
