Cloudflare R2 Setup (S3‑compatible)

Overview
- The app uses an S3 client via `boto3`. It works with R2 by pointing the S3 client at R2’s endpoint and using your R2 access keys.
- No code changes are required beyond setting environment variables.

Env Vars (in .env)
- Put these in a file named `.env` at the project root (same folder as `app/`). They are loaded automatically on startup.
- `DOCS_BUCKET` = your R2 bucket name (e.g., `muni-alerts-docs`)
- `S3_ENDPOINT_URL` = `https://<accountid>.r2.cloudflarestorage.com`
- `AWS_ACCESS_KEY_ID` = your R2 Access Key ID
- `AWS_SECRET_ACCESS_KEY` = your R2 Secret Access Key
- `AWS_REGION` = `auto` (or `us-east-1` — R2 accepts either)
- Optional: `S3_ADDRESSING_STYLE` = `virtual` (default) or `path`

Example .env
```
DOCS_BUCKET=muni-alerts-docs
S3_ENDPOINT_URL=https://xxxxxxxxxxxxxxx.r2.cloudflarestorage.com
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=auto
S3_ADDRESSING_STYLE=virtual
```

Notes
- Presigned URLs are generated by `boto3` and will be valid against the R2 endpoint.
- Keep the bucket private; downloads use time‑limited presigned links.
- If you see any path/host issues, set `S3_ADDRESSING_STYLE=path`.

Permissions
- Create an R2 API token with permissions for `PutObject`, `GetObject`, `DeleteObject`, and `ListBucket` on your bucket.

Testing
1) Set env vars above and restart the app.
2) Upload a file from `/tracker/dashboard`.
3) Verify the object appears in R2 under `prod/{user_id}/{opportunity_id}/...`.
4) Click Download — the presigned URL should work from your browser.
